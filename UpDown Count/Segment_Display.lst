MPASM  5.31               SEGMENT_DISPLAY.ASM   6-8-2015  12:39:06         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00002 ;; Microcontrollers Laboratory                   ;;
                      00003 ;; Exercise 3: Counter and Display System        ;;
                      00004 ;; Author: DJEUDJAM VERANE                       ;;
                      00005 ;; UB Number: FE11A046                               ;;
                      00006 ;; Date: 01/06/2015                              ;; 
                      00007 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00008         ;; This program uses a common cathode 7-segment display in PROTEUS
                      00009 
                      00010         LIST p=16f84A 
                      00011         #include <p16f84A.inc>          
                      00001         LIST
                      00002 ; P16F84A.INC  Standard Header File, Version 2.00    Microchip Technology, Inc.
                      00134         LIST
2007   3FF1           00012         __CONFIG _CP_OFF & _WDT_OFF & _PWRTE_ON & _XT_OSC
                      00013 
  0000000B            00014 count equ 0Bh
  0000000D            00015 N1 equ 0Dh      ;First counter for delay loop
  0000000E            00016 N2 equ 0Eh
  0000000C            00017 N3 equ 0Ch
                      00018 
Warning[205]: Found directive in column 1. (ORG)
0000                  00019 ORG 0x000
                      00020 
                      00021 ;;defining PORT B ad output
Warning[203]: Found opcode in column 1. (bsf)
0000   1683           00022 bsf STATUS,5
Warning[203]: Found opcode in column 1. (movlw)
0001   3000           00023 movlw  b'0000000'       ;setting PORTB pins to output
Warning[203]: Found opcode in column 1. (movwf)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0002   0086           00024 movwf TRISB
Warning[203]: Found opcode in column 1. (movlw)
0003   3006           00025 movlw b'00110'  ;setting PORTA pins RA1 and RA2 to input
Warning[203]: Found opcode in column 1. (movwf)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0004   0085           00026 movwf TRISA
Warning[203]: Found opcode in column 1. (bcf)
0005   1283           00027 bcf STATUS,5
                      00028 
0006                  00029 Start
0006   1885           00030         btfsc PORTA, 01h        ;get the value from RA1 if it is 0
0007   2011           00031         call UpCount
0008   3A6F           00032         xorlw   b'1101111'              ;check for last entry
0009   1903           00033         btfsc   STATUS, Z               ;if true set Zero flag
000A   2011           00034         call UpCount
                      00035 
000B   1905           00036         btfsc PORTA, 02h        ;get the value from RA2 if it is 0
000C   2018           00037         call DownCount
000D   3A3F           00038         xorlw b'0111111'
000E   1903           00039         btfsc STATUS, Z
000F   2018           00040         call DownCount          
                      00041 
MPASM  5.31               SEGMENT_DISPLAY.ASM   6-8-2015  12:39:06         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010   2806           00042         goto Start      
                      00043 
0011                  00044 UpCount
0011   080B           00045         movf count,w
0012   202F           00046         call Table
0013   0086           00047         movwf PORTB
0014   201F           00048         call Wait
0015   1885           00049         btfsc PORTA, 01h
0016   0A8B           00050         incf count,f
0017   340B           00051         retlw count
                      00052 
0018                  00053 DownCount
0018   080B           00054         movf count,w
0019   202F           00055         call Table
001A   0086           00056         movwf PORTB
001B   201F           00057         call Wait
001C   1905           00058         btfsc PORTA, 02h
001D   038B           00059         decf count,f
001E   340B           00060         retlw count
                      00061 
001F                  00062 Wait
                      00063                         ;999990 cycles
001F   3007           00064         movlw   07h
0020   008D           00065         movwf   N1
0021   302F           00066         movlw   2Fh
0022   008E           00067         movwf   N2
0023   3003           00068         movlw   03h
0024   008C           00069         movwf   N3
Warning[207]: Found label after column 1. (loop)
0025                  00070         loop
0025   0B8D           00071                 decfsz  N1, f
0026   2828           00072                 goto    $+2
0027   0B8E           00073                 decfsz  N2, f
0028   282A           00074                 goto    $+2
0029   0B8C           00075                 decfsz  N3, f
002A   2825           00076                 goto    loop
                      00077         
                      00078                 ;6 cycles
002B   282C           00079                 goto    $+1
002C   282D           00080                 goto    $+1
002D   282E           00081                 goto    $+1
                      00082                 ;4 cycles (including call)
Warning[203]: Found opcode in column 1. (return)
002E   0008           00083 return
                      00084 
002F                  00085 Table
002F   0782           00086         addwf PCL,f             ;PCL is prgram counter
0030   343F           00087         retlw b'0111111'
0031   3406           00088         retlw b'0000110'
0032   345B           00089         retlw b'1011011'
0033   344F           00090         retlw b'1001111'
0034   3466           00091         retlw b'1100110'
0035   346D           00092         retlw b'1101101'
MPASM  5.31               SEGMENT_DISPLAY.ASM   6-8-2015  12:39:06         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0036   347D           00093         retlw b'1111101'
0037   3407           00094         retlw b'0000111'
0038   347F           00095         retlw b'1111111'
0039   346F           00096         retlw b'1101111'
                      00097 
Warning[205]: Found directive in column 1. (END)
                      00098 END
MPASM  5.31               SEGMENT_DISPLAY.ASM   6-8-2015  12:39:06         PAGE  4


SYMBOL TABLE
  LABEL                             VALUE 

C                                 00000000
DC                                00000001
DownCount                         00000018
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
F                                 00000001
FSR                               00000004
GIE                               00000007
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
N1                                0000000D
N2                                0000000E
N3                                0000000C
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
OPTION_REG                        00000081
PCL                               00000002
PCLATH                            0000000A
PORTA                             00000005
PORTB                             00000006
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RP0                               00000005
RP1                               00000006
STATUS                            00000003
Start                             00000006
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TMR0                              00000001
TRISA                             00000085
TRISB                             00000086
Table                             0000002F
UpCount                           00000011
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
MPASM  5.31               SEGMENT_DISPLAY.ASM   6-8-2015  12:39:06         PAGE  5


SYMBOL TABLE
  LABEL                             VALUE 

Wait                              0000001F
Z                                 00000002
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84A                          00000001
__DEBUG                           1
count                             0000000B
loop                              00000025


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXX------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:    58
Program Memory Words Free:   966


Errors   :     0
Warnings :    10 reported,     0 suppressed
Messages :     2 reported,     0 suppressed

